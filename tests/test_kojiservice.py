# -*- coding: utf-8 -*-
#
# Copyright (c) 2017  Red Hat, Inc.
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in all
# copies or substantial portions of the Software.
#
# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
# AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
# OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
# SOFTWARE.
#
from unittest import mock

from freshmaker import kojiservice


@mock.patch("freshmaker.kojiservice.koji")
def test_build_container_csv_mods(mock_koji):
    mock_session = mock.Mock()
    mock_session.buildContainer.return_value = 123
    mock_koji.ClientSession.return_value = mock_session

    svc = kojiservice.KojiService()
    svc.build_container(
        "git@domain.local:namespace/repo.git",
        "1.0",
        "repo-1.0",
        operator_csv_modifications_url="https://domain.local/namespace/repo",
    )

    mock_session.buildContainer.assert_called_once_with(
        "git@domain.local:namespace/repo.git",
        "repo-1.0",
        {
            "git_branch": "1.0",
            "operator_csv_modifications_url": "https://domain.local/namespace/repo",
            "scratch": False,
        },
    )


@mock.patch("freshmaker.kojiservice.koji")
def test_get_ocp_versions_range(mock_koji):
    mock_session = mock.Mock()
    mock_session.getBuild.return_value = {"id": 123}
    archives = [{
        "arch": "x86_64",
        "btype": "image",
        "extra": {
            "docker": {
                "config": {
                    "architecture": "amd64",
                    "config": {
                        "Hostname": "c4b105e29878",
                        "Labels": {
                            "architecture": "x86_64",
                            "com.redhat.component": "foobar-bundle-container",
                            "com.redhat.delivery.backport": "true",
                            "com.redhat.delivery.operator.bundle": "true",
                            "com.redhat.openshift.versions": "v4.5,v4.6"
                        }
                    },
                    "os": "linux"
                },
                "id": "sha256:123"
            },
            "image": {
                "arch": "x86_64"
            }
        },
        "type_name": "tar"
    }]

    mock_session.listArchives.return_value = archives
    mock_koji.ClientSession.return_value = mock_session

    svc = kojiservice.KojiService()
    assert svc.get_ocp_versions_range('foobar-2-123') == "v4.5,v4.6"


@mock.patch("freshmaker.kojiservice.koji")
@mock.patch("freshmaker.kojiservice.requests.get")
@mock.patch("freshmaker.kojiservice.ZipFile")
@mock.patch("freshmaker.kojiservice.BytesIO")
@mock.patch("freshmaker.kojiservice.yaml")
def test_get_bundle_csv_success(
    mock_yaml, mock_bytesio, mock_zipfile, mock_get, mock_koji
):
    mock_session = mock.Mock()
    mock_session.getBuild.return_value = {
        "id": 123,
        "nvr": "foobar-bundle-container-2.0-123",
        "extra": {"operator_manifests_archive": "operator_manifests.zip"}
    }
    mock_koji.ClientSession.return_value = mock_session
    mock_get.return_value = mock.Mock(ok=True)
    mock_zipfile.return_value.namelist.return_value = [
        "foobar-v2.0-opr-1.clusterserviceversion.yaml",
        "foobar_crd.yaml",
        "foobar_artemisaddress_crd.yaml",
        "foobar_artemisscaledown_crd.yaml"
    ]
    mock_yaml.safe_load.return_value = {
        "apiVersion": "operators.coreos.com/v1alpha1",
        "kind": "ClusterServiceVersion",
        "spec": {"version": "2.0-opr-1"},
        "metadata": {"name": "foobar-2.0-opr-1"}
    }

    svc = kojiservice.KojiService()
    csv = svc.get_bundle_csv("foobar-bundle-container-2.0-123")
    assert csv["metadata"]["name"] == "foobar-2.0-opr-1"
    assert csv["spec"]["version"] == "2.0-opr-1"


@mock.patch("freshmaker.kojiservice.log")
@mock.patch("freshmaker.kojiservice.koji")
@mock.patch("freshmaker.kojiservice.requests.get")
def test_get_bundle_csv_unavailable(mock_get, mock_koji, mock_log):
    mock_session = mock.Mock()
    mock_session.getBuild.return_value = {
        "id": 123,
        "nvr": "foobar-bundle-container-2.0-123",
        "extra": {}
    }
    mock_koji.ClientSession.return_value = mock_session

    svc = kojiservice.KojiService()
    csv = svc.get_bundle_csv("foobar-bundle-container-2.0-123")
    assert csv is None
    mock_log.error.assert_any_call(
        "Operator manifests archive is unavaiable for build %s", "foobar-bundle-container-2.0-123"
    )


@mock.patch("freshmaker.kojiservice.koji")
def test_get_modulemd(mock_koji):
    mock_session = mock.Mock()
    build = {'build_id': 1850907, 'cg_id': 2, 'completion_time': '2021-11-01 21:24:43+00:00', 'completion_ts': 1635801883.0, 'creation_event_id': 82398390, 'creation_time': '2021-11-01 21:24:51.654639+00:00', 'creation_ts': 1635801891.654639, 'epoch': None, 'extra': {'typeinfo': {'module': {'modulemd_str': '---\ndocument: modulemd\nversion: 2\ndata:\n  name: ghc\n  stream: "9.2"\n  version: 3620211101111632\n  context: d099bf28\n  summary: Haskell GHC 9.2\n  description: >-\n    This module provides the Glasgow Haskell Compiler version 9.2.1\n  license:\n    module:\n    - MIT\n  xmd:\n    mbs:\n      buildrequires:\n        ghc:\n          context: 5e5ad4a0\n          filtered_rpms: []\n          koji_tag: module-ghc-8.10-3620210920031153-5e5ad4a0\n          ref: 1773e6a0b99813df3a02e83860ca5e51879b79da\n          stream: 8.10\n          version: 3620210920031153\n        platform:\n          context: 00000000\n          filtered_rpms: []\n          koji_tag: module-f36-build\n          ref: f36\n          stream: f36\n          stream_collision_modules: \n          ursine_rpms: \n          version: 1\n      commit: 5405c8a084c04476a956f1b3e49a733b888066a5\n      mse: TRUE\n      rpms:\n        ghc:\n          ref: 9be829cc000e68bb052f15099cac1a0ecac8f4eb\n      scmurl: https://src.fedoraproject.org/modules/ghc.git?#5405c8a084c04476a956f1b3e49a733b888066a5\n      ursine_rpms:\n      - ghc-bytestring-devel-0:0.10.12.0-115.fc35.s390x\n      - ghc-exceptions-prof-0:0.10.4-115.fc35.armv7hl\n      - ghc-template-haskell-devel-0:2.16.0.0-115.fc35.aarch64\n      - ghc-libiserv-0:8.10.5-115.fc35.s390x\n      - ghc-unix-prof-0:2.7.2.2-115.fc35.i686\n      - ghc-ghci-prof-0:8.10.5-115.fc35.s390x\n      - ghc-ghc-heap-prof-0:8.10.5-115.fc35.s390x\n      - ghc-haskeline-prof-0:0.8.0.1-115.fc35.aarch64\n      - ghc-template-haskell-0:2.16.0.0-115.fc35.aarch64\n      - ghc-array-devel-0:0.5.4.0-115.fc35.aarch64\n      - ghc-directory-prof-0:1.3.6.0-115.fc35.s390x\n      - ghc-bytestring-devel-0:0.10.12.0-115.fc35.aarch64\n      - ghc-libiserv-devel-0:8.10.5-115.fc35.armv7hl\n      - ghc-ghc-boot-0:8.10.5-115.fc35.aarch64\n      - ghc-ghc-compact-0:0.1.0.0-115.fc35.s390x\n      - ghc-process-0:1.6.9.0-115.fc35.armv7hl\n      - ghc-process-0:1.6.9.0-115.fc35.s390x\n      - ghc-ghc-compact-0:0.1.0.0-115.fc35.armv7hl\n      - ghc-terminfo-prof-0:0.4.1.4-115.fc35.armv7hl\n      - ghc-hpc-devel-0:0.6.1.0-115.fc35.ppc64le\n      - ghc-stm-devel-0:2.5.0.1-115.fc35.s390x\n      - ghc-base-devel-0:4.14.2.0-115.fc35.x86_64\n      - ghc-libiserv-prof-0:8.10.5-115.fc35.x86_64\n      - ghc-Cabal-0:3.2.1.0-115.fc35.ppc64le\n      - ghc-ghc-boot-0:8.10.5-115.fc35.ppc64le\n      - ghc-containers-0:0.6.4.1-115.fc35.s390x\n      - ghc-base-devel-0:4.14.2.0-115.fc35.aarch64\n      - ghc-transformers-doc-0:0.5.6.2-115.fc35.noarch\n      - ghc-parsec-prof-0:3.1.14.0-115.fc35.ppc64le\n      - ghc-binary-0:0.8.8.0-115.fc35.aarch64\n      - ghc-libiserv-prof-0:8.10.5-115.fc35.s390x\n      - ghc-base-devel-0:4.14.2.0-115.fc35.i686\n      - ghc-ghc-boot-th-0:8.10.5-115.fc35.armv7hl\n      - ghc-doc-0:8.10.5-115.fc35.ppc64le\n      - ghc-template-haskell-0:2.16.0.0-115.fc35.i686\n      - ghc-ghc-boot-devel-0:8.10.5-115.fc35.aarch64\n      - ghc-bytestring-devel-0:0.10.12.0-115.fc35.ppc64le\n      - ghc-ghc-heap-prof-0:8.10.5-115.fc35.i686\n      - ghc-ghci-prof-0:8.10.5-115.fc35.i686\n      - ghc-haskeline-devel-0:0.8.0.1-115.fc35.armv7hl\n      - ghc-mtl-0:2.2.2-115.fc35.i686\n      - ghc-hpc-0:0.6.1.0-115.fc35.s390x\n      - ghc-ghc-heap-prof-0:8.10.5-115.fc35.ppc64le\n      - ghc-ghc-boot-0:8.10.5-115.fc35.i686\n      - ghc-text-0:1.2.4.1-115.fc35.ppc64le\n      - ghc-ghc-boot-th-0:8.10.5-115.fc35.ppc64le\n      - ghc-transformers-devel-0:0.5.6.2-115.fc35.i686\n      - ghc-parsec-devel-0:3.1.14.0-115.fc35.i686\n      - ghc-hpc-devel-0:0.6.1.0-115.fc35.armv7hl\n      - ghc-transformers-devel-0:0.5.6.2-115.fc35.x86_64\n      - ghc-Cabal-0:3.2.1.0-115.fc35.s390x\n      - ghc-ghc-heap-prof-0:8.10.5-115.fc35.x86_64\n      - ghc-time-devel-0:1.9.3-115.fc35.armv7hl\n      - ghc-mtl-prof-0:2.2.2-115.fc35.armv7hl\n      - ghc-transformers-0:0.5.6.2-115.fc35.armv7hl\n      - ghc-mtl-0:2.2.2-115.fc35.x86_64\n      - ghc-binary-devel-0:0.8.8.0-115.fc35.s390x\n      - ghc-ghc-boot-th-devel-0:8.10.5-115.fc35.ppc64le\n      - ghc-ghc-boot-th-0:8.10.5-115.fc35.x86_64\n      - ghc-directory-prof-0:1.3.6.0-115.fc35.aarch64\n      - ghc-devel-0:8.10.5-115.fc35.aarch64\n      - ghc-binary-prof-0:0.8.8.0-115.fc35.ppc64le\n      - ghc-filepath-devel-0:1.4.2.1-115.fc35.i686\n      - ghc-parsec-prof-0:3.1.14.0-115.fc35.armv7hl\n      - ghc-ghc-devel-0:8.10.5-115.fc35.i686\n      - ghc-ghc-devel-0:8.10.5-115.fc35.armv7hl\n      - ghc-array-0:0.5.4.0-115.fc35.armv7hl\n      - ghc-unix-0:2.7.2.2-115.fc35.armv7hl\n      - ghc-xhtml-prof-0:3000.2.2.1-115.fc35.armv7hl\n      - ghc-transformers-prof-0:0.5.6.2-115.fc35.s390x\n      - ghc-binary-prof-0:0.8.8.0-115.fc35.i686\n      - ghc-terminfo-prof-0:0.4.1.4-115.fc35.i686\n      - ghc-xhtml-prof-0:3000.2.2.1-115.fc35.x86_64\n      - ghc-template-haskell-0:2.16.0.0-115.fc35.x86_64\n      - ghc-process-devel-0:1.6.9.0-115.fc35.aarch64\n      - ghc-containers-prof-0:0.6.4.1-115.fc35.s390x\n      - ghc-ghc-boot-th-prof-0:8.10.5-115.fc35.x86_64\n      - ghc-haskeline-prof-0:0.8.0.1-115.fc35.armv7hl\n      - ghc-filepath-devel-0:1.4.2.1-115.fc35.aarch64\n      - ghc-pretty-doc-0:1.1.3.6-115.fc35.noarch\n      - ghc-binary-0:0.8.8.0-115.fc35.ppc64le\n      - ghc-ghc-boot-prof-0:8.10.5-115.fc35.ppc64le\n      - ghc-text-devel-0:1.2.4.1-115.fc35.x86_64\n      - ghc-bytestring-devel-0:0.10.12.0-115.fc35.i686\n      - ghc-pretty-0:1.1.3.6-115.fc35.aarch64\n      - ghc-exceptions-0:0.10.4-115.fc35.s390x\n      - ghc-ghc-boot-devel-0:8.10.5-115.fc35.s390x\n      - ghc-mtl-devel-0:2.2.2-115.fc35.ppc64le\n      - ghc-array-devel-0:0.5.4.0-115.fc35.i686\n      - ghc-time-devel-0:1.9.3-115.fc35.s390x\n      - ghc-ghci-devel-0:8.10.5-115.fc35.i686\n      - ghc-parsec-prof-0:3.1.14.0-115.fc35.i686\n      - ghc-hpc-devel-0:0.6.1.0-115.fc35.aarch64\n      - ghc-stm-0:2.5.0.1-115.fc35.armv7hl\n      - ghc-doc-0:8.10.5-115.fc35.armv7hl\n      - ghc-array-prof-0:0.5.4.0-115.fc35.s390x\n      - ghc-ghci-prof-0:8.10.5-115.fc35.aarch64\n      - ghc-terminfo-0:0.4.1.4-115.fc35.ppc64le\n      - ghc-xhtml-0:3000.2.2.1-115.fc35.x86_64\n      - ghc-stm-prof-0:2.5.0.1-115.fc35.i686\n      - ghc-pretty-0:1.1.3.6-115.fc35.i686\n      - ghc-unix-0:2.7.2.2-115.fc35.x86_64\n      - ghc-directory-doc-0:1.3.6.0-115.fc35.noarch\n      - ghc-time-0:1.9.3-115.fc35.aarch64\n      - ghc-process-prof-0:1.6.9.0-115.fc35.ppc64le\n      - ghc-containers-devel-0:0.6.4.1-115.fc35.armv7hl\n      - ghc-xhtml-prof-0:3000.2.2.1-115.fc35.i686\n      - ghc-parsec-0:3.1.14.0-115.fc35.ppc64le\n      - ghc-mtl-0:2.2.2-115.fc35.armv7hl\n      - ghc-template-haskell-doc-0:2.16.0.0-115.fc35.noarch\n      - ghc-mtl-0:2.2.2-115.fc35.s390x\n      - ghc-template-haskell-0:2.16.0.0-115.fc35.armv7hl\n      - ghc-transformers-devel-0:0.5.6.2-115.fc35.ppc64le\n      - ghc-libiserv-devel-0:8.10.5-115.fc35.ppc64le\n      - ghc-stm-prof-0:2.5.0.1-115.fc35.x86_64\n      - ghc-deepseq-prof-0:1.4.4.0-115.fc35.s390x\n      - ghc-exceptions-0:0.10.4-115.fc35.ppc64le\n      - ghc-process-0:1.6.9.0-115.fc35.ppc64le\n      - ghc-ghc-boot-prof-0:8.10.5-115.fc35.i686\n      - ghc-pretty-0:1.1.3.6-115.fc35.s390x\n      - ghc-containers-prof-0:0.6.4.1-115.fc35.x86_64\n      - ghc-ghc-compact-0:0.1.0.0-115.fc35.ppc64le\n      - ghc-process-prof-0:1.6.9.0-115.fc35.i686\n      - ghc-haskeline-prof-0:0.8.0.1-115.fc35.s390x\n      - ghc-ghci-0:8.10.5-115.fc35.s390x\n      - ghc-mtl-doc-0:2.2.2-115.fc35.noarch\n      - ghc-text-devel-0:1.2.4.1-115.fc35.armv7hl\n      - ghc-Cabal-devel-0:3.2.1.0-115.fc35.aarch64\n      - ghc-text-prof-0:1.2.4.1-115.fc35.aarch64\n      - ghc-haskeline-devel-0:0.8.0.1-115.fc35.ppc64le\n      - ghc-terminfo-doc-0:0.4.1.4-115.fc35.noarch\n      - ghc-ghci-0:8.10.5-115.fc35.armv7hl\n      - ghc-array-0:0.5.4.0-115.fc35.x86_64\n      - ghc-ghc-compact-prof-0:0.1.0.0-115.fc35.ppc64le\n      - ghc-ghc-prof-0:8.10.5-115.fc35.ppc64le\n      - ghc-containers-devel-0:0.6.4.1-115.fc35.i686\n      - ghc-time-devel-0:1.9.3-115.fc35.i686\n      - ghc-ghc-devel-0:8.10.5-115.fc35.s390x\n      - ghc-libiserv-devel-0:8.10.5-115.fc35.aarch64\n      - ghc-bytestring-prof-0:0.10.12.0-115.fc35.x86_64\n      - ghc-base-0:4.14.2.0-115.fc35.aarch64\n      - ghc-directory-0:1.3.6.0-115.fc35.s390x\n      - ghc-xhtml-0:3000.2.2.1-115.fc35.s390x\n      - ghc-directory-devel-0:1.3.6.0-115.fc35.i686\n      - ghc-time-prof-0:1.9.3-115.fc35.armv7hl\n      - ghc-hpc-prof-0:0.6.1.0-115.fc35.aarch64\n      - ghc-ghci-devel-0:8.10.5-115.fc35.x86_64\n      - ghc-directory-prof-0:1.3.6.0-115.fc35.armv7hl\n      - ghc-haskeline-devel-0:0.8.0.1-115.fc35.i686\n      - ghc-pretty-prof-0:1.1.3.6-115.fc35.aarch64\n      - ghc-base-prof-0:4.14.2.0-115.fc35.ppc64le\n      - ghc-binary-devel-0:0.8.8.0-115.fc35.armv7hl\n      - ghc-terminfo-devel-0:0.4.1.4-115.fc35.aarch64\n      - ghc-transformers-prof-0:0.5.6.2-115.fc35.x86_64\n      - ghc-pretty-devel-0:1.1.3.6-115.fc35.x86_64\n      - ghc-ghc-compact-prof-0:0.1.0.0-115.fc35.i686\n      - ghc-exceptions-prof-0:0.10.4-115.fc35.s390x\n      - ghc-deepseq-0:1.4.4.0-115.fc35.aarch64\n      - ghc-unix-prof-0:2.7.2.2-115.fc35.s390x\n      - ghc-text-0:1.2.4.1-115.fc35.aarch64\n      - ghc-xhtml-prof-0:3000.2.2.1-115.fc35.ppc64le\n      - ghc-transformers-0:0.5.6.2-115.fc35.ppc64le\n      - ghc-time-0:1.9.3-115.fc35.x86_64\n      - ghc-transformers-prof-0:0.5.6.2-115.fc35.aarch64\n      - ghc-hpc-doc-0:0.6.1.0-115.fc35.noarch\n      - ghc-devel-0:8.10.5-115.fc35.armv7hl\n      - ghc-directory-devel-0:1.3.6.0-115.fc35.armv7hl\n      - ghc-array-prof-0:0.5.4.0-115.fc35.aarch64\n      - ghc-process-devel-0:1.6.9.0-115.fc35.s390x\n      - ghc-devel-0:8.10.5-115.fc35.i686\n      - ghc-doc-index-0:8.10.5-115.fc35.noarch\n      - ghc-libiserv-devel-0:8.10.5-115.fc35.s390x\n      - ghc-array-devel-0:0.5.4.0-115.fc35.x86_64\n      - ghc-stm-0:2.5.0.1-115.fc35.aarch64\n      - ghc-process-prof-0:1.6.9.0-115.fc35.s390x\n      - ghc-time-prof-0:1.9.3-115.fc35.ppc64le\n      - ghc-hpc-prof-0:0.6.1.0-115.fc35.ppc64le\n      - ghc-parsec-doc-0:3.1.14.0-115.fc35.noarch\n      - ghc-ghc-boot-th-prof-0:8.10.5-115.fc35.ppc64le\n      - ghc-ghc-heap-0:8.10.5-115.fc35.aarch64\n      - ghc-parsec-0:3.1.14.0-115.fc35.armv7hl\n      - ghc-deepseq-prof-0:1.4.4.0-115.fc35.i686\n      - ghc-containers-prof-0:0.6.4.1-115.fc35.armv7hl\n      - ghc-xhtml-devel-0:3000.2.2.1-115.fc35.x86_64\n      - ghc-transformers-0:0.5.6.2-115.fc35.aarch64\n      - ghc-ghc-boot-th-devel-0:8.10.5-115.fc35.aarch64\n      - ghc-time-devel-0:1.9.3-115.fc35.x86_64\n      - ghc-0:8.10.5-115.fc35.aarch64\n      - ghc-mtl-prof-0:2.2.2-115.fc35.i686\n      - ghc-array-devel-0:0.5.4.0-115.fc35.armv7hl\n      - ghc-prof-0:8.10.5-115.fc35.ppc64le\n      - ghc-ghc-heap-doc-0:8.10.5-115.fc35.noarch\n      - ghc-hpc-0:0.6.1.0-115.fc35.armv7hl\n      - ghc-template-haskell-prof-0:2.16.0.0-115.fc35.x86_64\n      - ghc-ghc-compact-doc-0:0.1.0.0-115.fc35.noarch\n      - ghc-mtl-devel-0:2.2.2-115.fc35.aarch64\n      - ghc-base-prof-0:4.14.2.0-115.fc35.x86_64\n      - ghc-ghc-boot-prof-0:8.10.5-115.fc35.aarch64\n      - ghc-stm-prof-0:2.5.0.1-115.fc35.armv7hl\n      - ghc-base-devel-0:4.14.2.0-115.fc35.s390x\n      - ghc-stm-prof-0:2.5.0.1-115.fc35.s390x\n      - ghc-Cabal-prof-0:3.2.1.0-115.fc35.x86_64\n      - ghc-ghc-boot-th-0:8.10.5-115.fc35.i686\n      - ghc-time-0:1.9.3-115.fc35.i686\n      - ghc-directory-prof-0:1.3.6.0-115.fc35.i686\n      - ghc-haskeline-devel-0:0.8.0.1-115.fc35.x86_64\n      - ghc-terminfo-0:0.4.1.4-115.fc35.i686\n      - ghc-stm-devel-0:2.5.0.1-115.fc35.x86_64\n      - ghc-containers-0:0.6.4.1-115.fc35.i686\n      - ghc-time-0:1.9.3-115.fc35.ppc64le\n      - ghc-ghc-boot-th-devel-0:8.10.5-115.fc35.armv7hl\n      - ghc-array-prof-0:0.5.4.0-115.fc35.i686\n      - ghc-stm-devel-0:2.5.0.1-115.fc35.ppc64le\n      - ghc-compiler-0:8.10.5-115.fc35.s390x\n      - ghc-libiserv-devel-0:8.10.5-115.fc35.x86_64\n      - ghc-exceptions-devel-0:0.10.4-115.fc35.ppc64le\n      - ghc-pretty-prof-0:1.1.3.6-115.fc35.i686\n      - ghc-terminfo-devel-0:0.4.1.4-115.fc35.ppc64le\n      - ghc-bytestring-prof-0:0.10.12.0-115.fc35.aarch64\n      - ghc-Cabal-prof-0:3.2.1.0-115.fc35.i686\n      - ghc-process-devel-0:1.6.9.0-115.fc35.armv7hl\n      - ghc-base-prof-0:4.14.2.0-115.fc35.armv7hl\n      - ghc-mtl-0:2.2.2-115.fc35.ppc64le\n      - ghc-text-0:1.2.4.1-115.fc35.x86_64\n      - ghc-template-haskell-prof-0:2.16.0.0-115.fc35.s390x\n      - ghc-template-haskell-0:2.16.0.0-115.fc35.s390x\n      - ghc-mtl-prof-0:2.2.2-115.fc35.x86_64\n      - ghc-xhtml-doc-0:3000.2.2.1-115.fc35.noarch\n      - ghc-filepath-devel-0:1.4.2.1-115.fc35.ppc64le\n      - ghc-ghc-heap-0:8.10.5-115.fc35.armv7hl\n      - ghc-process-devel-0:1.6.9.0-115.fc35.i686\n      - ghc-unix-devel-0:2.7.2.2-115.fc35.x86_64\n      - ghc-libiserv-0:8.10.5-115.fc35.x86_64\n      - ghc-parsec-0:3.1.14.0-115.fc35.x86_64\n      - ghc-array-devel-0:0.5.4.0-115.fc35.s390x\n      - ghc-directory-0:1.3.6.0-115.fc35.i686\n      - ghc-transformers-prof-0:0.5.6.2-115.fc35.armv7hl\n      - ghc-haskeline-0:0.8.0.1-115.fc35.x86_64\n      - ghc-stm-devel-0:2.5.0.1-115.fc35.armv7hl\n      - ghc-0:8.10.5-115.fc35.armv7hl\n      - ghc-process-doc-0:1.6.9.0-115.fc35.noarch\n      - ghc-filepath-prof-0:1.4.2.1-115.fc35.aarch64\n      - ghc-template-haskell-0:2.16.0.0-115.fc35.ppc64le\n      - ghc-exceptions-0:0.10.4-115.fc35.aarch64\n      - ghc-libiserv-0:8.10.5-115.fc35.ppc64le\n      - ghc-hpc-prof-0:0.6.1.0-115.fc35.i686\n      - ghc-exceptions-devel-0:0.10.4-115.fc35.armv7hl\n      - ghc-haskeline-0:0.8.0.1-115.fc35.aarch64\n      - ghc-compiler-0:8.10.5-115.fc35.aarch64\n      - ghc-prof-0:8.10.5-115.fc35.s390x\n      - ghc-ghci-prof-0:8.10.5-115.fc35.x86_64\n      - ghc-process-prof-0:1.6.9.0-115.fc35.x86_64\n      - ghc-xhtml-prof-0:3000.2.2.1-115.fc35.aarch64\n      - ghc-terminfo-prof-0:0.4.1.4-115.fc35.aarch64\n      - ghc-libiserv-0:8.10.5-115.fc35.aarch64\n      - ghc-ghc-devel-0:8.10.5-115.fc35.ppc64le\n      - ghc-unix-devel-0:2.7.2.2-115.fc35.ppc64le\n      - ghc-ghc-boot-th-devel-0:8.10.5-115.fc35.x86_64\n      - ghc-ghc-boot-devel-0:8.10.5-115.fc35.x86_64\n      - ghc-time-devel-0:1.9.3-115.fc35.aarch64\n      - ghc-terminfo-devel-0:0.4.1.4-115.fc35.armv7hl\n      - ghc-libiserv-doc-0:8.10.5-115.fc35.noarch\n      - ghc-doc-0:8.10.5-115.fc35.i686\n      - ghc-ghc-0:8.10.5-115.fc35.aarch64\n      - ghc-template-haskell-prof-0:2.16.0.0-115.fc35.armv7hl\n      - ghc-haskeline-0:0.8.0.1-115.fc35.ppc64le\n      - ghc-ghci-0:8.10.5-115.fc35.aarch64\n      - ghc-libiserv-prof-0:8.10.5-115.fc35.armv7hl\n      - ghc-ghc-compact-devel-0:0.1.0.0-115.fc35.aarch64\n      - ghc-ghci-0:8.10.5-115.fc35.i686\n      - ghc-ghc-compact-prof-0:0.1.0.0-115.fc35.armv7hl\n      - ghc-filepath-0:1.4.2.1-115.fc35.armv7hl\n      - ghc-parsec-devel-0:3.1.14.0-115.fc35.ppc64le\n      - ghc-mtl-prof-0:2.2.2-115.fc35.ppc64le\n      - ghc-ghc-boot-th-prof-0:8.10.5-115.fc35.aarch64\n      - ghc-exceptions-0:0.10.4-115.fc35.armv7hl\n      - ghc-hpc-devel-0:0.6.1.0-115.fc35.s390x\n      - ghc-0:8.10.5-115.fc35.s390x\n      - ghc-process-0:1.6.9.0-115.fc35.aarch64\n      - ghc-template-haskell-devel-0:2.16.0.0-115.fc35.x86_64\n      - ghc-terminfo-prof-0:0.4.1.4-115.fc35.s390x\n      - ghc-Cabal-0:3.2.1.0-115.fc35.x86_64\n      - ghc-devel-0:8.10.5-115.fc35.ppc64le\n      - ghc-hpc-prof-0:0.6.1.0-115.fc35.x86_64\n      - ghc-unix-prof-0:2.7.2.2-115.fc35.ppc64le\n      - ghc-hpc-devel-0:0.6.1.0-115.fc35.i686\n      - ghc-stm-0:2.5.0.1-115.fc35.i686\n      - ghc-parsec-0:3.1.14.0-115.fc35.i686\n      - ghc-base-prof-0:4.14.2.0-115.fc35.s390x\n      - ghc-0:8.10.5-115.fc35.x86_64\n      - ghc-exceptions-devel-0:0.10.4-115.fc35.s390x\n      - ghc-deepseq-devel-0:1.4.4.0-115.fc35.s390x\n      - ghc-ghc-heap-devel-0:8.10.5-115.fc35.x86_64\n      - ghc-bytestring-0:0.10.12.0-115.fc35.i686\n      - ghc-libiserv-prof-0:8.10.5-115.fc35.ppc64le\n      - ghc-xhtml-devel-0:3000.2.2.1-115.fc35.armv7hl\n      - ghc-exceptions-prof-0:0.10.4-115.fc35.x86_64\n      - ghc-array-0:0.5.4.0-115.fc35.i686\n      - ghc-ghc-compact-0:0.1.0.0-115.fc35.aarch64\n      - ghc-filepath-prof-0:1.4.2.1-115.fc35.ppc64le\n      - ghc-Cabal-0:3.2.1.0-115.fc35.armv7hl\n      - ghc-filepath-0:1.4.2.1-115.fc35.i686\n      - ghc-deepseq-0:1.4.4.0-115.fc35.s390x\n      - ghc-filepath-0:1.4.2.1-115.fc35.ppc64le\n      - ghc-ghc-heap-devel-0:8.10.5-115.fc35.ppc64le\n      - ghc-template-haskell-devel-0:2.16.0.0-115.fc35.i686\n      - ghc-doc-0:8.10.5-115.fc35.aarch64\n      - ghc-directory-devel-0:1.3.6.0-115.fc35.aarch64\n      - ghc-hpc-0:0.6.1.0-115.fc35.x86_64\n      - ghc-directory-devel-0:1.3.6.0-115.fc35.s390x\n      - ghc-filepath-devel-0:1.4.2.1-115.fc35.x86_64\n      - ghc-process-devel-0:1.6.9.0-115.fc35.ppc64le\n      - ghc-stm-0:2.5.0.1-115.fc35.s390x\n      - ghc-containers-devel-0:0.6.4.1-115.fc35.s390x\n      - ghc-binary-devel-0:0.8.8.0-115.fc35.i686\n      - ghc-exceptions-prof-0:0.10.4-115.fc35.ppc64le\n      - ghc-ghci-devel-0:8.10.5-115.fc35.ppc64le\n      - ghc-ghci-prof-0:8.10.5-115.fc35.ppc64le\n      - ghc-ghc-compact-devel-0:0.1.0.0-115.fc35.armv7hl\n      - ghc-deepseq-devel-0:1.4.4.0-115.fc35.i686\n      - ghc-containers-0:0.6.4.1-115.fc35.x86_64\n      - ghc-haskeline-devel-0:0.8.0.1-115.fc35.aarch64\n      - ghc-haskeline-0:0.8.0.1-115.fc35.s390x\n      - ghc-mtl-0:2.2.2-115.fc35.aarch64\n      - ghc-binary-0:0.8.8.0-115.fc35.s390x\n      - ghc-pretty-prof-0:1.1.3.6-115.fc35.x86_64\n      - ghc-base-0:4.14.2.0-115.fc35.i686\n      - ghc-directory-0:1.3.6.0-115.fc35.aarch64\n      - ghc-time-prof-0:1.9.3-115.fc35.s390x\n      - ghc-unix-devel-0:2.7.2.2-115.fc35.aarch64\n      - ghc-pretty-prof-0:1.1.3.6-115.fc35.s390x\n      - ghc-parsec-devel-0:3.1.14.0-115.fc35.s390x\n      - ghc-libiserv-devel-0:8.10.5-115.fc35.i686\n      - ghc-array-0:0.5.4.0-115.fc35.ppc64le\n      - ghc-filepath-0:1.4.2.1-115.fc35.x86_64\n      - ghc-binary-devel-0:0.8.8.0-115.fc35.x86_64\n      - ghc-filepath-prof-0:1.4.2.1-115.fc35.armv7hl\n      - ghc-ghci-devel-0:8.10.5-115.fc35.armv7hl\n      - ghc-process-0:1.6.9.0-115.fc35.i686\n      - ghc-process-prof-0:1.6.9.0-115.fc35.armv7hl\n      - ghc-text-prof-0:1.2.4.1-115.fc35.ppc64le\n      - ghc-ghci-0:8.10.5-115.fc35.x86_64\n      - ghc-ghc-heap-0:8.10.5-115.fc35.x86_64\n      - ghc-Cabal-prof-0:3.2.1.0-115.fc35.armv7hl\n      - ghc-pretty-devel-0:1.1.3.6-115.fc35.aarch64\n      - ghc-transformers-devel-0:0.5.6.2-115.fc35.s390x\n      - ghc-ghc-boot-0:8.10.5-115.fc35.armv7hl\n      - ghc-ghc-boot-th-0:8.10.5-115.fc35.s390x\n      - ghc-base-prof-0:4.14.2.0-115.fc35.i686\n      - ghc-pretty-prof-0:1.1.3.6-115.fc35.ppc64le\n      - ghc-haskeline-prof-0:0.8.0.1-115.fc35.i686\n      - ghc-exceptions-doc-0:0.10.4-115.fc35.noarch\n      - ghc-array-0:0.5.4.0-115.fc35.s390x\n      - ghc-parsec-prof-0:3.1.14.0-115.fc35.x86_64\n      - ghc-terminfo-devel-0:0.4.1.4-115.fc35.x86_64\n      - ghc-text-prof-0:1.2.4.1-115.fc35.armv7hl\n      - ghc-stm-0:2.5.0.1-115.fc35.x86_64\n      - ghc-filepath-0:1.4.2.1-115.fc35.s390x\n      - ghc-base-devel-0:4.14.2.0-115.fc35.armv7hl\n      - ghc-terminfo-0:0.4.1.4-115.fc35.x86_64\n      - ghc-ghc-heap-devel-0:8.10.5-115.fc35.armv7hl\n      - ghc-time-0:1.9.3-115.fc35.s390x\n      - ghc-ghc-prof-0:8.10.5-115.fc35.s390x\n      - ghc-unix-0:2.7.2.2-115.fc35.aarch64\n      - ghc-text-doc-0:1.2.4.1-115.fc35.noarch\n      - ghc-containers-prof-0:0.6.4.1-115.fc35.ppc64le\n      - ghc-ghc-heap-prof-0:8.10.5-115.fc35.armv7hl\n      - ghc-ghc-boot-th-prof-0:8.10.5-115.fc35.i686\n      - ghc-template-haskell-prof-0:2.16.0.0-115.fc35.i686\n      - ghc-unix-prof-0:2.7.2.2-115.fc35.x86_64\n      - ghc-xhtml-0:3000.2.2.1-115.fc35.i686\n      - ghc-ghci-doc-0:8.10.5-115.fc35.noarch\n      - ghc-binary-0:0.8.8.0-115.fc35.armv7hl\n      - ghc-bytestring-devel-0:0.10.12.0-115.fc35.armv7hl\n      - ghc-Cabal-devel-0:3.2.1.0-115.fc35.armv7hl\n      - ghc-array-devel-0:0.5.4.0-115.fc35.ppc64le\n      - ghc-libiserv-0:8.10.5-115.fc35.armv7hl\n      - ghc-containers-devel-0:0.6.4.1-115.fc35.x86_64\n      - ghc-stm-0:2.5.0.1-115.fc35.ppc64le\n      - ghc-doc-0:8.10.5-115.fc35.x86_64\n      - ghc-ghc-heap-devel-0:8.10.5-115.fc35.s390x\n      - ghc-Cabal-prof-0:3.2.1.0-115.fc35.s390x\n      - ghc-unix-prof-0:2.7.2.2-115.fc35.armv7hl\n      - ghc-xhtml-devel-0:3000.2.2.1-115.fc35.i686\n      - ghc-hpc-0:0.6.1.0-115.fc35.ppc64le\n      - ghc-xhtml-0:3000.2.2.1-115.fc35.aarch64\n      - ghc-xhtml-prof-0:3000.2.2.1-115.fc35.s390x\n      - ghc-text-devel-0:1.2.4.1-115.fc35.s390x\n      - ghc-parsec-devel-0:3.1.14.0-115.fc35.aarch64\n      - ghc-directory-devel-0:1.3.6.0-115.fc35.ppc64le\n      - ghc-filepath-prof-0:1.4.2.1-115.fc35.x86_64\n      - ghc-pretty-devel-0:1.1.3.6-115.fc35.ppc64le\n      - ghc-unix-0:2.7.2.2-115.fc35.i686\n      - ghc-directory-0:1.3.6.0-115.fc35.x86_64\n      - ghc-deepseq-devel-0:1.4.4.0-115.fc35.aarch64\n      - ghc-exceptions-0:0.10.4-115.fc35.x86_64\n      - ghc-exceptions-devel-0:0.10.4-115.fc35.x86_64\n      - ghc-Cabal-prof-0:3.2.1.0-115.fc35.aarch64\n      - ghc-containers-doc-0:0.6.4.1-115.fc35.noarch\n      - ghc-ghc-compact-devel-0:0.1.0.0-115.fc35.x86_64\n      - ghc-hpc-prof-0:0.6.1.0-115.fc35.armv7hl\n      - ghc-template-haskell-devel-0:2.16.0.0-115.fc35.armv7hl\n      - ghc-transformers-0:0.5.6.2-115.fc35.i686\n      - ghc-ghc-0:8.10.5-115.fc35.x86_64\n      - ghc-ghc-boot-th-devel-0:8.10.5-115.fc35.i686\n      - ghc-text-devel-0:1.2.4.1-115.fc35.aarch64\n      - ghc-ghc-0:8.10.5-115.fc35.s390x\n      - ghc-pretty-0:1.1.3.6-115.fc35.x86_64\n      - ghc-containers-prof-0:0.6.4.1-115.fc35.i686\n      - ghc-Cabal-doc-0:3.2.1.0-115.fc35.noarch\n      - ghc-bytestring-0:0.10.12.0-115.fc35.ppc64le\n      - ghc-xhtml-devel-0:3000.2.2.1-115.fc35.aarch64\n      - ghc-time-prof-0:1.9.3-115.fc35.i686\n      - ghc-ghc-boot-prof-0:8.10.5-115.fc35.x86_64\n      - ghc-time-devel-0:1.9.3-115.fc35.ppc64le\n      - ghc-ghc-prof-0:8.10.5-115.fc35.armv7hl\n      - ghc-time-prof-0:1.9.3-115.fc35.x86_64\n      - ghc-text-0:1.2.4.1-115.fc35.i686\n      - ghc-ghc-0:8.10.5-115.fc35.i686\n      - ghc-parsec-devel-0:3.1.14.0-115.fc35.x86_64\n      - ghc-ghc-boot-doc-0:8.10.5-115.fc35.noarch\n      - ghc-transformers-prof-0:0.5.6.2-115.fc35.i686\n      - ghc-ghc-heap-prof-0:8.10.5-115.fc35.aarch64\n      - ghc-prof-0:8.10.5-115.fc35.i686\n      - ghc-containers-prof-0:0.6.4.1-115.fc35.aarch64\n      - ghc-stm-prof-0:2.5.0.1-115.fc35.aarch64\n      - ghc-parsec-prof-0:3.1.14.0-115.fc35.aarch64\n      - ghc-ghc-compact-devel-0:0.1.0.0-115.fc35.i686\n      - ghc-hpc-devel-0:0.6.1.0-115.fc35.x86_64\n      - ghc-binary-prof-0:0.8.8.0-115.fc35.aarch64\n      - ghc-ghc-boot-devel-0:8.10.5-115.fc35.ppc64le\n      - ghc-unix-devel-0:2.7.2.2-115.fc35.s390x\n      - ghc-exceptions-prof-0:0.10.4-115.fc35.aarch64\n      - ghc-filepath-devel-0:1.4.2.1-115.fc35.s390x\n      - ghc-parsec-0:3.1.14.0-115.fc35.aarch64\n      - ghc-ghc-prof-0:8.10.5-115.fc35.x86_64\n      - ghc-array-prof-0:0.5.4.0-115.fc35.armv7hl\n      - ghc-unix-devel-0:2.7.2.2-115.fc35.i686\n      - ghc-compiler-0:8.10.5-115.fc35.i686\n      - ghc-Cabal-0:3.2.1.0-115.fc35.aarch64\n      - ghc-ghc-doc-0:8.10.5-115.fc35.noarch\n      - ghc-ghc-boot-devel-0:8.10.5-115.fc35.armv7hl\n      - ghc-filepath-prof-0:1.4.2.1-115.fc35.s390x\n      - ghc-xhtml-0:3000.2.2.1-115.fc35.armv7hl\n      - ghc-terminfo-prof-0:0.4.1.4-115.fc35.x86_64\n      - ghc-ghc-prof-0:8.10.5-115.fc35.i686\n      - ghc-haskeline-0:0.8.0.1-115.fc35.armv7hl\n      - ghc-deepseq-0:1.4.4.0-115.fc35.ppc64le\n      - ghc-ghc-heap-devel-0:8.10.5-115.fc35.aarch64\n      - ghc-pretty-devel-0:1.1.3.6-115.fc35.s390x\n      - ghc-mtl-devel-0:2.2.2-115.fc35.s390x\n      - ghc-terminfo-devel-0:0.4.1.4-115.fc35.s390x\n      - ghc-stm-doc-0:2.5.0.1-115.fc35.noarch\n      - ghc-ghci-devel-0:8.10.5-115.fc35.aarch64\n      - ghc-text-prof-0:1.2.4.1-115.fc35.s390x\n      - ghc-ghc-compact-devel-0:0.1.0.0-115.fc35.ppc64le\n      - ghc-haskeline-prof-0:0.8.0.1-115.fc35.ppc64le\n      - ghc-ghc-0:8.10.5-115.fc35.ppc64le\n      - ghc-deepseq-devel-0:1.4.4.0-115.fc35.armv7hl\n      - ghc-mtl-devel-0:2.2.2-115.fc35.x86_64\n      - ghc-binary-devel-0:0.8.8.0-115.fc35.ppc64le\n      - ghc-binary-prof-0:0.8.8.0-115.fc35.armv7hl\n      - ghc-Cabal-0:3.2.1.0-115.fc35.i686\n      - ghc-ghc-boot-th-0:8.10.5-115.fc35.aarch64\n      - ghc-compiler-0:8.10.5-115.fc35.x86_64\n      - ghc-xhtml-devel-0:3000.2.2.1-115.fc35.ppc64le\n      - ghc-xhtml-devel-0:3000.2.2.1-115.fc35.s390x\n      - ghc-exceptions-prof-0:0.10.4-115.fc35.i686\n      - ghc-terminfo-0:0.4.1.4-115.fc35.aarch64\n      - ghc-base-0:4.14.2.0-115.fc35.x86_64\n      - ghc-base-prof-0:4.14.2.0-115.fc35.aarch64\n      - ghc-pretty-0:1.1.3.6-115.fc35.armv7hl\n      - ghc-parsec-devel-0:3.1.14.0-115.fc35.armv7hl\n      - ghc-binary-devel-0:0.8.8.0-115.fc35.aarch64\n      - ghc-Cabal-devel-0:3.2.1.0-115.fc35.i686\n      - ghc-binary-0:0.8.8.0-115.fc35.i686\n      - ghc-filepath-0:1.4.2.1-115.fc35.aarch64\n      - ghc-array-prof-0:0.5.4.0-115.fc35.x86_64\n      - ghc-template-haskell-devel-0:2.16.0.0-115.fc35.ppc64le\n      - ghc-filepath-devel-0:1.4.2.1-115.fc35.armv7hl\n      - ghc-containers-0:0.6.4.1-115.fc35.armv7hl\n      - ghc-base-0:4.14.2.0-115.fc35.armv7hl\n      - ghc-compiler-0:8.10.5-115.fc35.ppc64le\n      - ghc-parsec-prof-0:3.1.14.0-115.fc35.s390x\n      - ghc-ghc-compact-prof-0:0.1.0.0-115.fc35.s390x\n      - ghc-bytestring-prof-0:0.10.12.0-115.fc35.ppc64le\n      - ghc-terminfo-devel-0:0.4.1.4-115.fc35.i686\n      - ghc-0:8.10.5-115.fc35.i686\n      - ghc-devel-0:8.10.5-115.fc35.x86_64\n      - ghc-directory-prof-0:1.3.6.0-115.fc35.x86_64\n      - ghc-base-devel-0:4.14.2.0-115.fc35.ppc64le\n      - ghc-unix-0:2.7.2.2-115.fc35.s390x\n      - ghc-terminfo-0:0.4.1.4-115.fc35.armv7hl\n      - ghc-ghc-boot-prof-0:8.10.5-115.fc35.s390x\n      - ghc-transformers-devel-0:0.5.6.2-115.fc35.aarch64\n      - ghc-bytestring-prof-0:0.10.12.0-115.fc35.i686\n      - ghc-unix-0:2.7.2.2-115.fc35.ppc64le\n      - ghc-transformers-0:0.5.6.2-115.fc35.s390x\n      - ghc-time-prof-0:1.9.3-115.fc35.aarch64\n      - ghc-binary-doc-0:0.8.8.0-115.fc35.noarch\n      - ghc-filepath-prof-0:1.4.2.1-115.fc35.i686\n      - ghc-doc-0:8.10.5-115.fc35.s390x\n      - ghc-text-devel-0:1.2.4.1-115.fc35.ppc64le\n      - ghc-exceptions-devel-0:0.10.4-115.fc35.i686\n      - ghc-haskeline-doc-0:0.8.0.1-115.fc35.noarch\n      - ghc-ghc-heap-0:8.10.5-115.fc35.s390x\n      - ghc-terminfo-prof-0:0.4.1.4-115.fc35.ppc64le\n      - ghc-ghc-heap-0:8.10.5-115.fc35.ppc64le\n      - ghc-ghci-0:8.10.5-115.fc35.ppc64le\n      - ghc-binary-0:0.8.8.0-115.fc35.x86_64\n      - ghc-ghc-compact-devel-0:0.1.0.0-115.fc35.s390x\n      - ghc-parsec-0:3.1.14.0-115.fc35.s390x\n      - ghc-directory-devel-0:1.3.6.0-115.fc35.x86_64\n      - ghc-Cabal-prof-0:3.2.1.0-115.fc35.ppc64le\n      - ghc-text-prof-0:1.2.4.1-115.fc35.i686\n      - ghc-deepseq-0:1.4.4.0-115.fc35.i686\n      - ghc-array-prof-0:0.5.4.0-115.fc35.ppc64le\n      - ghc-text-prof-0:1.2.4.1-115.fc35.x86_64\n      - ghc-mtl-prof-0:2.2.2-115.fc35.aarch64\n      - ghc-ghc-compact-prof-0:0.1.0.0-115.fc35.x86_64\n      - ghc-directory-0:1.3.6.0-115.fc35.ppc64le\n      - ghc-deepseq-0:1.4.4.0-115.fc35.armv7hl\n      - ghc-exceptions-0:0.10.4-115.fc35.i686\n      - ghc-process-prof-0:1.6.9.0-115.fc35.aarch64\n      - ghc-array-doc-0:0.5.4.0-115.fc35.noarch\n      - ghc-base-doc-0:4.14.2.0-115.fc35.noarch\n      - ghc-mtl-devel-0:2.2.2-115.fc35.armv7hl\n      - ghc-containers-devel-0:0.6.4.1-115.fc35.ppc64le\n      - ghc-libiserv-prof-0:8.10.5-115.fc35.aarch64\n      - ghc-directory-prof-0:1.3.6.0-115.fc35.ppc64le\n      - ghc-deepseq-prof-0:1.4.4.0-115.fc35.ppc64le\n      - ghc-deepseq-0:1.4.4.0-115.fc35.x86_64\n      - ghc-containers-0:0.6.4.1-115.fc35.ppc64le\n      - ghc-haskeline-0:0.8.0.1-115.fc35.i686\n      - ghc-xhtml-0:3000.2.2.1-115.fc35.ppc64le\n      - ghc-template-haskell-prof-0:2.16.0.0-115.fc35.ppc64le\n      - ghc-binary-prof-0:0.8.8.0-115.fc35.s390x\n      - ghc-deepseq-prof-0:1.4.4.0-115.fc35.x86_64\n      - ghc-binary-prof-0:0.8.8.0-115.fc35.x86_64\n      - ghc-transformers-devel-0:0.5.6.2-115.fc35.armv7hl\n      - ghc-hpc-0:0.6.1.0-115.fc35.aarch64\n      - ghc-bytestring-0:0.10.12.0-115.fc35.aarch64\n      - ghc-bytestring-doc-0:0.10.12.0-115.fc35.noarch\n      - ghc-ghc-boot-th-prof-0:8.10.5-115.fc35.s390x\n      - ghc-Cabal-devel-0:3.2.1.0-115.fc35.s390x\n      - ghc-prof-0:8.10.5-115.fc35.aarch64\n      - ghc-stm-devel-0:2.5.0.1-115.fc35.i686\n      - ghc-devel-0:8.10.5-115.fc35.s390x\n      - ghc-ghci-prof-0:8.10.5-115.fc35.armv7hl\n      - ghc-manual-0:8.10.5-115.fc35.noarch\n      - ghc-hpc-prof-0:0.6.1.0-115.fc35.s390x\n      - ghc-directory-0:1.3.6.0-115.fc35.armv7hl\n      - ghc-haskeline-devel-0:0.8.0.1-115.fc35.s390x\n      - ghc-libiserv-prof-0:8.10.5-115.fc35.i686\n      - ghc-pretty-prof-0:1.1.3.6-115.fc35.armv7hl\n      - ghc-pretty-0:1.1.3.6-115.fc35.ppc64le\n      - ghc-bytestring-0:0.10.12.0-115.fc35.x86_64\n      - ghc-unix-devel-0:2.7.2.2-115.fc35.armv7hl\n      - ghc-hpc-0:0.6.1.0-115.fc35.i686\n      - ghc-ghc-boot-prof-0:8.10.5-115.fc35.armv7hl\n      - ghc-bytestring-prof-0:0.10.12.0-115.fc35.armv7hl\n      - ghc-Cabal-devel-0:3.2.1.0-115.fc35.x86_64\n      - ghc-mtl-devel-0:2.2.2-115.fc35.i686\n      - ghc-deepseq-devel-0:1.4.4.0-115.fc35.x86_64\n      - ghc-containers-devel-0:0.6.4.1-115.fc35.aarch64\n      - ghc-ghc-boot-devel-0:8.10.5-115.fc35.i686\n      - ghc-ghc-boot-th-doc-0:8.10.5-115.fc35.noarch\n      - ghc-text-devel-0:1.2.4.1-115.fc35.i686\n      - ghc-text-0:1.2.4.1-115.fc35.armv7hl\n      - ghc-base-0:4.14.2.0-115.fc35.ppc64le\n      - ghc-Cabal-devel-0:3.2.1.0-115.fc35.ppc64le\n      - ghc-text-0:1.2.4.1-115.fc35.s390x\n      - ghc-ghc-0:8.10.5-115.fc35.armv7hl\n      - ghc-ghc-compact-prof-0:0.1.0.0-115.fc35.aarch64\n      - ghc-filepath-doc-0:1.4.2.1-115.fc35.noarch\n      - ghc-stm-devel-0:2.5.0.1-115.fc35.aarch64\n      - ghc-ghc-boot-0:8.10.5-115.fc35.s390x\n      - ghc-ghc-boot-th-prof-0:8.10.5-115.fc35.armv7hl\n      - ghc-transformers-prof-0:0.5.6.2-115.fc35.ppc64le\n      - ghc-prof-0:8.10.5-115.fc35.armv7hl\n      - ghc-prof-0:8.10.5-115.fc35.x86_64\n      - ghc-bytestring-0:0.10.12.0-115.fc35.s390x\n      - ghc-terminfo-0:0.4.1.4-115.fc35.s390x\n      - ghc-pretty-devel-0:1.1.3.6-115.fc35.i686\n      - ghc-haskeline-prof-0:0.8.0.1-115.fc35.x86_64\n      - ghc-bytestring-devel-0:0.10.12.0-115.fc35.x86_64\n      - ghc-unix-doc-0:2.7.2.2-115.fc35.noarch\n      - ghc-deepseq-prof-0:1.4.4.0-115.fc35.armv7hl\n      - ghc-ghc-boot-th-devel-0:8.10.5-115.fc35.s390x\n      - ghc-base-0:4.14.2.0-115.fc35.s390x\n      - ghc-containers-0:0.6.4.1-115.fc35.aarch64\n      - ghc-compiler-0:8.10.5-115.fc35.armv7hl\n      - ghc-process-0:1.6.9.0-115.fc35.x86_64\n      - ghc-ghc-compact-0:0.1.0.0-115.fc35.i686\n      - ghc-ghci-devel-0:8.10.5-115.fc35.s390x\n      - ghc-ghc-compact-0:0.1.0.0-115.fc35.x86_64\n      - ghc-bytestring-0:0.10.12.0-115.fc35.armv7hl\n      - ghc-unix-prof-0:2.7.2.2-115.fc35.aarch64\n      - ghc-bytestring-prof-0:0.10.12.0-115.fc35.s390x\n      - ghc-0:8.10.5-115.fc35.ppc64le\n      - ghc-ghc-devel-0:8.10.5-115.fc35.x86_64\n      - ghc-stm-prof-0:2.5.0.1-115.fc35.ppc64le\n      - ghc-array-0:0.5.4.0-115.fc35.aarch64\n      - ghc-deepseq-prof-0:1.4.4.0-115.fc35.aarch64\n      - ghc-ghc-devel-0:8.10.5-115.fc35.aarch64\n      - ghc-process-devel-0:1.6.9.0-115.fc35.x86_64\n      - ghc-template-haskell-devel-0:2.16.0.0-115.fc35.s390x\n      - ghc-libiserv-0:8.10.5-115.fc35.i686\n      - ghc-time-doc-0:1.9.3-115.fc35.noarch\n      - ghc-ghc-heap-devel-0:8.10.5-115.fc35.i686\n      - ghc-exceptions-devel-0:0.10.4-115.fc35.aarch64\n      - ghc-transformers-0:0.5.6.2-115.fc35.x86_64\n      - ghc-ghc-boot-0:8.10.5-115.fc35.x86_64\n      - ghc-mtl-prof-0:2.2.2-115.fc35.s390x\n      - ghc-deepseq-devel-0:1.4.4.0-115.fc35.ppc64le\n      - ghc-pretty-devel-0:1.1.3.6-115.fc35.armv7hl\n      - ghc-template-haskell-prof-0:2.16.0.0-115.fc35.aarch64\n      - ghc-deepseq-doc-0:1.4.4.0-115.fc35.noarch\n      - ghc-time-0:1.9.3-115.fc35.armv7hl\n      - ghc-ghc-heap-0:8.10.5-115.fc35.i686\n      - ghc-ghc-prof-0:8.10.5-115.fc35.aarch64\n  dependencies:\n  - buildrequires:\n      ghc: [8.10]\n      platform: [f36]\n    requires:\n      platform: [f36]\n  references:\n    community: https://www.haskell.org/ghc\n    documentation: https://wiki.haskell.org/GHC\n    tracker: https://gitlab.haskell.org/ghc/ghc/issues\n  profiles:\n    all:\n      description: standard installation\n      rpms:\n      - ghc\n      - ghc-doc\n      - ghc-prof\n    default:\n      description: standard installation\n      rpms:\n      - ghc\n    minimal:\n      description: just compiler and base\n      rpms:\n      - ghc-base-devel\n    small:\n      description: compiler with main core libs\n      rpms:\n      - ghc-devel\n  components:\n    rpms:\n      ghc:\n        rationale: compiler\n        repository: git+https://src.fedoraproject.org/rpms/ghc\n        cache: https://src.fedoraproject.org/repo/pkgs/ghc\n        ref: 9.2\n        buildorder: 1\n        arches: [aarch64, armv7hl, i686, ppc64le, s390x, x86_64]\n...\n', 'name': 'ghc', 'stream': '9.2', 'module_build_service_id': 13274, 'version': '3620211101111632', 'context': 'd099bf28', 'content_koji_tag': 'module-ghc-9.2-3620211101111632-d099bf28'}}}, 'id': 1850907, 'name': 'ghc', 'nvr': 'ghc-9.2-3620211101111632.d099bf28', 'owner_id': 56, 'owner_name': 'petersen', 'package_id': 1853, 'package_name': 'ghc', 'release': '3620211101111632.d099bf28', 'source': 'https://src.fedoraproject.org/modules/ghc.git?#5405c8a084c04476a956f1b3e49a733b888066a5', 'start_time': '2021-11-01 13:48:17+00:00', 'start_ts': 1635774497.0, 'state': 1, 'task_id': None, 'version': '9.2', 'volume_id': 0, 'volume_name': 'DEFAULT', 'cg_name': 'module-build-service'}
    mock_session.getBuild.return_value = build

    mock_koji.ClientSession.return_value = mock_session

    svc = kojiservice.KojiService()
    mmd = svc.get_modulemd("ghc-9.2-3620211101111632.d099bf28")
    module_name = mmd.get_module_name()
    module_stream = mmd.get_stream_name()
    assert module_name == "ghc"
    assert module_stream == "9.2"
